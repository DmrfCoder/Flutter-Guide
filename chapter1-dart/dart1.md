@[toc]
### å˜é‡

ä¸‹é¢æ˜¯å£°æ˜å˜é‡å¹¶èµ‹å€¼çš„æ–¹æ³•ï¼š

```dart
var name = 'Bob';
```

å˜é‡å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä¸Šé¢åå­—ä¸º `name` çš„å˜é‡å¼•ç”¨äº† ä¸€ä¸ªå†…å®¹ä¸º `â€œBobâ€` çš„ `String` å¯¹è±¡ã€‚

#### é»˜è®¤å€¼

æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡ä¼šè‡ªåŠ¨è·å–ä¸€ä¸ªé»˜è®¤å€¼ `null`ã€‚ç±»å‹ä¸ºæ•°å­—çš„å˜é‡å¦‚æœæ²¡æœ‰åˆå§‹åŒ–å…¶å€¼ä¹Ÿæ˜¯ `null`ï¼Œå› ä¸ºæ•°å­—ç±»å‹ä¹Ÿæ˜¯å¯¹è±¡ã€‚

```dart
int lineCount;
assert(lineCount == null);
```

**æ³¨æ„ï¼š** `assert()`èµ·åˆ°æ–­è¨€çš„ä½œç”¨ï¼Œå½“`assert()`ä¸­çš„æ¡ä»¶ä¸º`true`æ—¶è¯­å¥ä¼šæ­£å¸¸æ‰§è¡Œï¼Œå¦‚æœæ¡ä»¶ä¸º`false` åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚

#### å¯é€‰çš„ç±»å‹

åœ¨å£°æ˜å˜é‡çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ€§åœ°åŠ ä¸Šå…·ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼š

```dart
String name = 'Bob';
```

æ·»åŠ ç±»å‹å¯ä»¥æ›´åŠ æ¸…æ™°çš„è¡¨è¾¾ä½ çš„æ„å›¾ã€‚ `IDE` ç¼–è¯‘å™¨ç­‰å·¥å…·æœ‰å¯ä»¥é€šè¿‡ä½ å£°æ˜çš„ç±»å‹ä¸ºä½ æä¾›ä»£ç è¡¥å…¨ã€æå‰å‘ç° `bug` ç­‰åŠŸèƒ½ã€‚

**æ³¨æ„ï¼š**æ ¹æ® **ä»£ç é£æ ¼æ¨è** éƒ¨åˆ†çš„å»ºè®®ï¼Œå¯¹äºå±€éƒ¨å˜é‡æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ `var` è€Œä¸æ˜¯å…·ä½“çš„ç±»å‹ã€‚

#### finalä»¥åŠconst

å¦‚æœä½ ä¹‹åä¸æ‰“ç®—ä¿®æ”¹æŸä¸€ä¸ªå˜é‡ï¼Œåˆ™åº”è¯¥ä½¿ç”¨ `final` æˆ–è€… `const`ä¿®é¥°è¯¥å˜é‡ã€‚ ä¸€ä¸ª `final` å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œä¸€ä¸ª `const` å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆ`const` å˜é‡æ˜¯ç‰¹æ®Šçš„ `final` å˜é‡ï¼‰ï¼Œ é¡¶çº§çš„ final å˜é‡æˆ–è€…ç±»ä¸­çš„ final å˜é‡åœ¨ ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™åˆå§‹åŒ–ã€‚

è¿™é‡Œå¯èƒ½æœ‰è¯»è€…ä¼šæœ‰ç–‘æƒ‘ï¼Œä»€ä¹ˆæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Ÿæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜finalå’Œconstçš„çœŸæ­£åŒºåˆ«ï¼š

```dart
buildName() {
  return 'running name';
}

finalAndConstDemo() {
  final finalName = buildName();
  const constName = 'Joey';
}
```

å¦‚ä¸Šä»£ç ï¼Œ`buildName()`æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼Œåªæœ‰åœ¨ç¨‹åºçœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šçŸ¥é“è¿™ä¸ª`buildName()`æ–¹æ³•åˆ°åº•è¿”å›çš„æ˜¯ä»€ä¹ˆï¼Œå³è¿™ä¸ª`buildName()`æ–¹æ³•è¿”å›çš„ä¸æ˜¯"ç¼–è¯‘æ—¶å¸¸é‡"ï¼Œå› æ­¤ï¼Œä¸èƒ½ä½¿ç”¨å…¶å¯¹`const`ä¿®é¥°çš„å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œä½†æ˜¯ï¼Œ`final`çš„è¦æ±‚æ¯”`const`ä½ä¸€ç‚¹ï¼Œå®ƒåªè¦æ±‚åªèƒ½å¯¹å…¶ä¿®é¥°çš„å˜é‡èµ‹å€¼ä¸€æ¬¡ï¼Œè‡³äºæ˜¯ç¼–è¯‘æ—¶èµ‹å€¼è¿˜æ˜¯è¿è¡Œæ—¶èµ‹å€¼æ˜¯ä¸è¦æ±‚çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å—ä¼šé€šè¿‡ç¼–è¾‘å¹¶æ­£ç¡®æ‰§è¡Œï¼Œå€˜è‹¥ä½¿ç”¨ï¼š

```dart
const constName=buildName()
```

åˆ™ç¼–è¯‘å™¨ä¼šæ¯«ä¸ç•™æƒ…åœ°æŠ¥é”™ï¼Œå› ä¸º`buildName()`çš„è¿”å›å€¼ä¸èƒ½å†ç¼–è¯‘æ—¶è¢«ç¡®å®šã€‚

å¦‚æœ `const` å˜é‡åœ¨ç±»ä¸­ï¼Œåˆ™åº”è¯¥å®šä¹‰ä¸º `static const`ã€‚ å¯ä»¥ç›´æ¥å®šä¹‰ `const` å’Œå…¶å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»– `const` å˜é‡çš„å€¼æ¥åˆå§‹åŒ–ä¸€ä¸ª `const` å˜é‡ï¼š

```dart
const bar = 1000000;       
const atm = 1.01325 * bar; 
```

`const` å…³é”®å­—ä¸ä»…å¯ä»¥ç”¨æ¥ä¿®é¥°å¸¸é‡ï¼Œè¿˜å¯ä»¥ç”¨æ¥ä¿®é¥°æ„é€ å‡½æ•°ï¼Œè¿™ç§ç±»å‹çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œæ¯”å¦‚ï¼š

```dart
var foo = const [];   
final bar = const []; 
const baz = const []; 
```

`[]` çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªç©ºçš„`list`ï¼Œ`const []` çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªç©ºçš„ã€ä¸å¯æ”¹å˜çš„`list`ï¼ˆ`empty, immutable list (EIA)`ï¼‰ï¼Œå¯¹ä¸Šé¢çš„ä¸‰è¡Œä»£ç è§£é‡Šå¦‚ä¸‹ï¼š

1. ç¬¬ä¸€è¡Œä»£ç æ¯”è¡¨ç¤º`foo`å½“å‰å¼•ç”¨çš„æ˜¯ä¸€ä¸ªç©ºçš„ã€ä¸å¯æ”¹å˜çš„`list`ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä¹‹åè®©`foo`å¼•ç”¨å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚`foo=name`ï¼Œè¿™æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯åœ¨æ­¤ä¹‹å‰ä¸èƒ½è¿›è¡Œåƒ`foo.add("name")`è¿™æ ·çš„æ“ä½œï¼Œå› ä¸ºæ­¤æ—¶fooæŒ‡å‘çš„æ˜¯ä¸€ä¸ªä¸å¯æ”¹å˜çš„`list`ã€‚
2. ç¬¬äºŒè¡Œä»£ç è¡¨ç¤º`bar`å°†ä¼šä¸€ç›´æ˜¯ä¸€ä¸ªç©ºçš„ã€ä¸å¯æ”¹å˜çš„`list`ï¼Œåœ¨ä¹‹åçš„ä»£ç ä¸­ä¸èƒ½å¯¹`bar`è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œä¾‹å¦‚`bar.add("name")`å°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
3. ç¬¬ä¸‰è¡Œä»£ç è¡¨ç¤º`baz`å°†ä¼šåœ¨ç¼–è¯‘æ—¶å°±æ˜¯ä¸€ä¸ªç©ºçš„ã€ä¸å¯æ”¹å˜çš„`list`ï¼Œåœ¨ä¹‹åçš„ä»£ç ä¸­ä¸èƒ½å¯¹`baz`è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œä¾‹å¦‚`baz.add("name")`å°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

#### å†…ç½®çš„ç±»å‹

Dart å†…ç½®æ”¯æŒä¸‹é¢è¿™äº›ç±»å‹ï¼š

- numbers
- strings
- booleans
- lists (ä¹Ÿè¢«ç§°ä¹‹ä¸º arrays)
- maps
- runes (ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­è¡¨ç¤º Unicode å­—ç¬¦)
- symbols

ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å­—é¢é‡æ¥åˆå§‹åŒ–ä¸Šé¢çš„è¿™äº›ç±»å‹ã€‚ ä¾‹å¦‚ `'this is a string'` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ï¼Œ `true` æ˜¯ä¸€ä¸ªå¸ƒå°”å­—é¢é‡ã€‚

ç”±äº Dart ä¸­æ¯ä¸ªå˜é‡å¼•ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ ï¼ˆä¸€ä¸ªç±»çš„å®ä¾‹ï¼‰ï¼Œ æ‰€ä»¥ä½ é€šå¸¸åº”è¯¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å˜é‡ã€‚ ä¸€äº›å†…ç½®çš„ç±»å‹å…·æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ å¯ä»¥ä½¿ç”¨ `Map()`æ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª mapï¼Œ æ¯”å¦‚ï¼š `new Map()`ã€‚

##### Numbersï¼ˆæ•°å€¼ï¼‰

Dart æ”¯æŒä¸¤ç§ç±»å‹çš„æ•°å­—ï¼š

- `int`

  æ•´æ•°å€¼ï¼Œå…¶å–å€¼é€šå¸¸ä½äº `-253` å’Œ `253` ä¹‹é—´ã€‚

- `double`

  `64-bit` (åŒç²¾åº¦) æµ®ç‚¹æ•°ï¼Œç¬¦åˆ `IEEE 754` æ ‡å‡†ã€‚

`int` å’Œ `double` éƒ½æ˜¯ `num`çš„å­ç±»ã€‚ `num` ç±»å‹å®šä¹‰äº†åŸºæœ¬çš„æ“ä½œç¬¦ï¼Œä¾‹å¦‚ `+, -, /,  *`ï¼Œ è¿˜å®šä¹‰äº† `abs()`ã€` ceil()`ã€å’Œ `floor()` ç­‰å‡½æ•°ã€‚ (ä½æ“ä½œç¬¦ï¼Œä¾‹å¦‚ `>>` å®šä¹‰åœ¨ `int` ç±»ä¸­) å¦‚æœ `num` æˆ–è€…å…¶å­ç±»å‹å…·æœ‰çš„çš„åŸºæœ¬è¿ç®—ä¸æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œè¯·æŸ¥æ‰¾ `dart:math`ï¼ˆåœ°å€ï¼š`https://api.dartlang.org/stable/dart-math/dart-math-library.html`ï¼‰åº“ä»¥å¯»æ‰¾æ›´å¤šçš„è¿ç®—æ”¯æŒã€‚

æ•´æ•°æ˜¯ä¸å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚ä¸‹é¢æ˜¯ä¸€äº›å®šä¹‰æ•´æ•°çš„æ–¹å¼ï¼š

```dart
var x = 1;
var hex = 0xDEADBEEF;
var bigInt = 34653465834652437659238476592374958739845729;
```

å¦‚æœä¸€ä¸ªæ•°å¸¦å°æ•°ç‚¹ï¼Œåˆ™å…¶ä¸º `double`ï¼Œ ä¸‹é¢æ˜¯å®šä¹‰ `double` çš„ä¸€äº›æ–¹å¼ï¼š

```dart
var y = 1.1;
var exponents = 1.42e5;

```

ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´è½¬æ¢çš„æ–¹å¼ï¼š

```dart
// String -> int
var one = int.parse('1');
assert(one == 1);

// String -> double
var onePointOne = double.parse('1.1');
assert(onePointOne == 1.1);

// int -> String
String oneAsString = 1.toString();
assert(oneAsString == '1');

// double -> String
String piAsString = 3.14159.toStringAsFixed(2);
assert(piAsString == '3.14');

```

æ•´æ•°ç±»å‹æ”¯æŒä¼ ç»Ÿçš„ä½ç§»æ“ä½œç¬¦ï¼Œæ¯”å¦‚`å·¦ç§»ï¼ˆ<<ï¼‰`,`å³ç§»(>>)`, `ä¸ (&)`, `æˆ– (|)`ï¼š

```dart
assert((3 << 1) == 6);  // 0011 << 1 == 0110
assert((3 >> 1) == 1);  // 0011 >> 1 == 0001
assert((3 | 4)  == 7);  // 0011 | 0100 == 0111

```

æ•°å­—å­—é¢é‡ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ å¾ˆå¤šç®—æœ¯è¡¨è¾¾å¼åªè¦å…¶æ“ä½œæ•°æ˜¯å¸¸é‡ï¼Œåˆ™è¡¨è¾¾å¼ç»“æœä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼š

```dart
const msPerSecond = 1000;
const secondsUntilRetry = 5;
const msUntilRetry = secondsUntilRetry * msPerSecond;

```

å¦‚ä¸Šä»£ç ï¼Œ`msPerSecond`å’Œ`secondsUntilRetry`åœ¨ç¼–è¯‘æ—¶æ—¶å¸¸é‡ï¼Œæ‰€ä»¥ç”±`secondsUntilRetry * msPerSecond`èµ‹å€¼çš„`msUntilRetry`åœ¨ç¼–è¯‘æ—¶ä¹Ÿä¼šæ˜¯å¸¸é‡ã€‚

##### Stringsï¼ˆå­—ç¬¦ä¸²ï¼‰

Dart å­—ç¬¦ä¸²æ˜¯ `UTF-16` ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚ å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";

```

å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œç”¨æ³•ä¸ºï¼š `${expression}`ã€‚

å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥çœç•¥ `{}`ã€‚ å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ Dart ä¼šè°ƒç”¨å¯¹è±¡çš„ `toString()` å‡½æ•°æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

```dart
var s = 'string interpolation';

assert('Dart has $s, which is very handy.' ==
       'Dart has string interpolation, ' +
       'which is very handy.');
assert('That deserves all caps. ' +
       '${s.toUpperCase()} is very handy!' ==
       'That deserves all caps. ' +
       'STRING INTERPOLATION is very handy!');

```

**æ³¨æ„ï¼š** `==` æ“ä½œç¬¦åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„**å†…å®¹**æ˜¯å¦ä¸€æ ·ã€‚ å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ä¸€æ ·çš„å­—ç¬¦ç¼–ç åºåˆ—ï¼Œ åˆ™ä»–ä»¬æ˜¯ç›¸ç­‰çš„ã€‚

æ‹¼æ¥å­—ç¬¦ä¸²æœ‰ä¸¤ç§æ–¹æ³•ï¼š

1. ä½¿ç”¨ `+` æ“ä½œç¬¦æ¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²é“¾æ¥ä¸ºä¸€ä¸ª
2. ç›´æ¥æŠŠå¤šä¸ªå­—ç¬¦ä¸²æ”¾åˆ°ä¸€èµ·

```dart
var s1 = 'String ' 'concatenation'
         " works even over line breaks.";//ç›´æ¥å°†å­—ç¬¦ä¸²æ”¾åœ¨ä¸€èµ·ï¼Œä¼šè¿›è¡Œè‡ªåŠ¨æ‹¼æ¥
assert(s1 == 'String concatenation works even over '
             'line breaks.');

var s2 = 'The + operator '
         + 'works, as well.';//ä½¿ç”¨+è¿ç®—ç¬¦æ¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥
assert(s2 == 'The + operator works, as well.');

```

ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–è€…ä¸‰ä¸ªåŒå¼•å·æ¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²å¯¹è±¡ï¼š

```dart
var s1 = '''
You can create
multi-line strings like this one.
''';

var s2 = """This is also a
multi-line string.""";

```

é€šè¿‡æä¾›ä¸€ä¸ª `r` å‰ç¼€å¯ä»¥åˆ›å»ºä¸€ä¸ªåŸå§‹`(rawï¼‰`å­—ç¬¦ä¸²ï¼Œå³å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰å­—ç¬¦ä¼šä¸èµ·ä½œç”¨ï¼š

```dart
stringDemo() {
  var s1 = r'\n1234';
  var s2 = '\n1234';
  print('s1:' + s1);
  print('s2:' + s2);
}
```

ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š

![image-20190530214504777](http://picture-pool.oss-cn-beijing.aliyuncs.com/2019-06-06-092813.png)

å¯ä»¥çœ‹åˆ°ï¼ŒåŠ äº†`r`å‰ç¼€å`\n`ä¸­çš„è½¬ä¹‰ç¬¦`\`å¤±æ•ˆäº†ã€‚

##### Booleansï¼ˆå¸ƒå°”å€¼ï¼‰

ä¸ºäº†ä»£è¡¨å¸ƒå°”å€¼ï¼ŒDart æœ‰ä¸€ä¸ª `bool` ç±»å‹ã€‚ åªæœ‰ä¸¤ä¸ªå¯¹è±¡æ˜¯å¸ƒå°”ç±»å‹çš„ï¼š`true` å’Œ `false` ï¼Œ è¿™ä¸¤ä¸ªå¯¹è±¡ä¹Ÿéƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚

å½“ Dart éœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼çš„æ—¶å€™ï¼Œåªæœ‰ `true` å¯¹è±¡æ‰è¢«è®¤ä¸ºæ˜¯ `true`ã€‚ æ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯ `flase`ï¼Œåƒ `1`ã€ `"aString"`ã€ ä»¥åŠ `someObject` ç­‰å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ `false`ã€‚

ä¾‹å¦‚ï¼š

```dart
var name = 'Bob';
if (name) {
  print('You have a name!');
}
```

åœ¨Dart**ç”Ÿäº§æ¨¡å¼**ä¸‹è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä¸ä¼šè¾“å‡º`'You have a name!'`ï¼Œå› ä¸º`name`çš„å€¼ä¸æ˜¯`true`ï¼Œæ‰€ä»¥å°±ä¼šè®¤ä¸ºæ˜¯`false`ã€‚

##### Listsï¼ˆåˆ—è¡¨ï¼‰

 `array` ï¼ˆæˆ–è€…æœ‰åºé›†åˆï¼‰å‡ ä¹æ˜¯æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆç±»å‹ã€‚  Dart ä¸­çš„`List`å¯¹è±¡æŒ‡çš„å°±æ˜¯æ•°ç»„ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ç§°ä¹‹ä¸º `lists`ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ª Dart `list` çš„ç¤ºä¾‹ï¼š

```dart
var list = [1, 2, 3];

```

`Lists` çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 0ï¼Œæœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯`list.length - 1` ã€‚ 

Listç±»è¿˜æœ‰å¾ˆå¤šæ“ä½œï¼Œæˆ‘ä¼šåœ¨åé¢è®²è§£æ³›å‹å’Œé›†åˆçš„æ—¶å€™å±•å¼€å™è¿°ã€‚

##### Maps

é€šå¸¸æ¥è¯´ï¼Œ`Map` æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ç›¸å…³çš„å¯¹è±¡ã€‚ é”®å’Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚æ¯ä¸ªé”®åªå‡ºç°ä¸€æ¬¡ï¼Œ è€Œä¸€ä¸ªå€¼åˆ™å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚Dart é€šè¿‡ `map` å­—é¢é‡ å’Œ `Map`ç±»æ”¯æŒ `map`ã€‚

ä¸‹é¢æ˜¯ä¸€äº›åˆ›å»ºç®€å• `map` çš„ç¤ºä¾‹ï¼š

```dart
var gifts = {
	// Keys      Values
  'first' : 'partridge',
  'second': 'turtledoves',
  'fifth' : 'golden rings'
};

var nobleGases = {
	// Keys  Values
  2 :   'helium',
  10:   'neon',
  18:   'argon',
};

```

ä½¿ç”¨ `Map` æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼š

```dart
var gifts = new Map();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

var nobleGases = new Map();
nobleGases[2] = 'helium';
nobleGases[10] = 'neon';
nobleGases[18] = 'argon';

```

å¾€ `map` ä¸­æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼š

```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds'; // Add a key-value pair

```

è·å– `map` ä¸­çš„å¯¹è±¡ï¼š

```dart
var gifts = {'first': 'partridge'};
assert(gifts['first'] == 'partridge');

```

å¦‚æœæ‰€æŸ¥æ‰¾çš„é”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› `null`ï¼š

```dart
var gifts = {'first': 'partridge'};
assert(gifts['fifth'] == null);

```

ä½¿ç”¨ `.length` æ¥è·å– `map` ä¸­é”®å€¼å¯¹çš„æ•°ç›®ï¼š

```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds';
assert(gifts.length == 2);

```

åŒæ ·ä½¿ç”¨ `const` å¯ä»¥åˆ›å»ºä¸€ä¸ª ç¼–è¯‘æ—¶å¸¸é‡çš„ `map`ï¼š

```dart
final constantMap = const {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};

// constantMap[2] = 'Helium'; // Uncommenting this causes an error.

```

##### Runes

åœ¨`Dart`ä¸­ï¼Œ`Runes`ä»£è¡¨å­—ç¬¦ä¸²çš„`UTF-32`å­—ç¬¦é›†, `Unicode`ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦ã€æ ‡ç‚¹ç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰éƒ½å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ï¼Œç”±äº`Dart`å­—ç¬¦ä¸²æ˜¯`UTF-16`çš„å­—ç¬¦åºåˆ—ï¼Œæ‰€ä»¥åœ¨å­—ç¬¦ä¸²ä¸­è¡¨è¾¾32ä½çš„çš„å­—ç¬¦åºåˆ—æ—¶å°±éœ€è¦æ–°çš„è¯­æ³•äº†ã€‚é€šå¸¸ä½¿ç”¨`\uXXXX`çš„æ–¹å¼æ¥è¡¨ç¤º, è¿™é‡Œçš„`XXXX`æ˜¯4ä¸ª16è¿›åˆ¶çš„æ•°, å¦‚ï¼Œå¿ƒå½¢ç¬¦å·`(â™¥)`æ˜¯`\u2665`ï¼Œå¯¹äºé4ä¸ªæ•°å€¼çš„æƒ…å†µï¼ŒæŠŠç¼–ç å€¼æ”¾åˆ°å¤§æ‹¬å·ä¸­å³å¯, å¦‚ç¬‘è„¸`emoji` (ğŸ˜†) æ˜¯`\u{1f600}`

`String`ç±»æœ‰ä¸€äº›å±æ€§å¯ä»¥æå– `rune` ä¿¡æ¯ï¼š

1. `codeUnitAt` å’Œ `codeUnit` å±æ€§è¿”å›16ä½å­—ç¬¦
2. ä½¿ç”¨ `runes` å±æ€§æ¥è·å–å­—ç¬¦ä¸²çš„ `runes` ä¿¡æ¯

```dart
runesDemo() {
  Runes runes = new Runes('\u2665, \u{1f605}, \u{1f60e}');
  print(runes);
  print(new String.fromCharCodes(runes));
}

```

ä¸Šè¿°ä»£ç çš„è¾“å‡ºä¸ºï¼š

![image-20190530220322602](http://picture-pool.oss-cn-beijing.aliyuncs.com/2019-06-06-092814.png)
### å‡½æ•°
Dart æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡è¯­è¨€ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡å¹¶ä¸”å…·æœ‰ä¸€ç§ç±»å‹ï¼š`Function`ã€‚ è¿™æ„å‘³ç€ï¼Œå‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥å½“åšå…¶ä»–å‡½æ•°çš„å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŠŠ Dart ç±»çš„å®ä¾‹å½“åšå‡½æ•°æ¥è°ƒç”¨ã€‚ 

ä¸‹é¢æ˜¯å®šä¹‰å‡½æ•°çš„ç¤ºä¾‹ï¼š

```dart
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸æ˜¾ç¤ºæŒ‡å®šè¿”å›ç±»å‹ï¼š

```dart
isNoble(atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

å¯¹äºåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼çš„å‡½æ•°ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ç¼©å†™è¯­æ³•æ¥å®šä¹‰ï¼š

```dart
bool isNoble(int atomicNumber) => _nobleGases[atomicNumber] != null;
```

è¿™ä¸ª `=> expr` è¯­æ³•æ˜¯ `{ return expr; }` å½¢å¼çš„ç¼©å†™ã€‚`=>` å½¢å¼æœ‰æ—¶å€™ä¹Ÿç§°ä¹‹ä¸º**èƒ–ç®­å¤´**è¯­æ³•ã€‚

**æ³¨æ„ï¼š** åœ¨ç®­å¤´ (`=>`) å’Œåˆ†å· (`;`) ä¹‹é—´åªèƒ½ä½¿ç”¨ä¸€ä¸ª **è¡¨è¾¾å¼**è€Œ â€“ ä¸èƒ½ä½¿ç”¨**è¯­å¥**ã€‚

å‡½æ•°å¯ä»¥æœ‰ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼š**å¿…éœ€çš„**å’Œ**å¯é€‰çš„**ã€‚ å¿…éœ€çš„å‚æ•°åœ¨å‚æ•°åˆ—è¡¨å‰é¢ï¼Œå¯é€‰çš„å‚æ•°åœ¨å‚æ•°åˆ—è¡¨åé¢ã€‚

#### å¯é€‰å‚æ•°

å¯é€‰å‚æ•°å¯ä»¥æ˜¯**å‘½åå‚æ•°**æˆ–è€…**åŸºäºä½ç½®**çš„å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸¤ç§å‚æ•°**ä¸èƒ½åŒæ—¶å½“åšå¯é€‰å‚æ•°**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯é€‰å‚æ•°è¦ä¹ˆæ˜¯å‘½åå‚æ•°ï¼Œè¦ä¹ˆæ˜¯åŸºäºä½ç½®çš„å‚æ•°ï¼Œä¸èƒ½è¯´æŸä¸€ä¸ªå‡½æ•°ä¸­çš„å¯é€‰å‚æ•°æ—¢æœ‰å‘½åå‚æ•°ï¼Œä¹Ÿæœ‰åŸºäºä½ç½®çš„å‚æ•°ã€‚

##### ï¼ˆå¯é€‰ï¼‰å‘½åå‚æ•°

è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ç§å½¢å¼ `paramName: value` æ¥æŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š

```dart
enableFlags(bold: true, hidden: false);
```

åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨ `{param1, param2, â€¦}` çš„å½¢å¼æ¥æŒ‡å®šå‘½åå‚æ•°ï¼š

```dart
enableFlags({bool bold, bool hidden}) {
  // ...
}
```

##### ï¼ˆå¯é€‰ï¼‰ä½ç½®å‚æ•°

æŠŠä¸€äº›å‡½æ•°çš„å‚æ•°æ”¾åˆ° `[]` ä¸­å°±å˜æˆå¯é€‰ä½ç½®å‚æ•°äº†ï¼š

```dart
String say(String from, String msg, [String device]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  return result;
}
```

ä¸‹é¢æ˜¯ä¸ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šé¢å‡½æ•°çš„ç¤ºä¾‹ï¼š

```dart
assert(say('Bob', 'Howdy') == 'Bob says Howdy');
```

ä¸‹é¢æ˜¯ä½¿ç”¨å¯é€‰å‚æ•°è°ƒç”¨ä¸Šé¢å‡½æ•°çš„ç¤ºä¾‹ï¼š

```dart
assert(say('Bob', 'Howdy', 'smoke signal') ==
    'Bob says Howdy with a smoke signal');
```

#### é»˜è®¤å‚æ•°å€¼

åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ `=` æ¥å®šä¹‰**å¯é€‰å‚æ•°çš„é»˜è®¤å€¼**ã€‚ é»˜è®¤å€¼åªèƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ å¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤å€¼ä¸º `null`ã€‚

ä¸‹é¢æ˜¯è®¾ç½®å¯é€‰å‚æ•°é»˜è®¤å€¼çš„ç¤ºä¾‹ï¼š

```dart
void enableFlags({bool bold = false, bool hidden = false}) {
  // ...
}
// boldå°†ä¼šæ˜¯true; hiddenå°†ä¼šæ˜¯false.
enableFlags(bold: true);

```

**ç‰ˆæœ¬é—®é¢˜ï¼š** æ—§ç‰ˆæœ¬ä»£ç å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªå†’å· (`:`) è€Œä¸æ˜¯ `=` æ¥è®¾ç½®å‚æ•°é»˜è®¤å€¼ã€‚ åŸå› åœ¨äº Dart SDK 1.21 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå‘½åå‚æ•°åªæ”¯æŒ `:`ã€‚ `:` è®¾ç½®å‘½åé»˜è®¤å‚æ•°å€¼åœ¨ä»¥åç‰ˆæœ¬ä¸­å°†ä¸èƒ½ä½¿ç”¨ï¼Œ æ‰€ä»¥æ¨èä½ **ä½¿ç”¨ = æ¥è®¾ç½®é»˜è®¤å€¼ï¼Œ å¹¶æŒ‡å®š Dart SDK ç‰ˆæœ¬ä¸º 1.21 æˆ–è€…æ›´é«˜çš„ç‰ˆæœ¬ã€‚**

ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®ä½ç½®å‚æ•°çš„é»˜è®¤å€¼ï¼š

```dart
String say(String from, String msg,
    [String device = 'carrier pigeon', String mood]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  if (mood != null) {
    result = '$result (in a $mood mood)';
  }
  return result;
}

assert(say('Bob', 'Howdy') ==
    'Bob says Howdy with a carrier pigeon');

```

è¿˜å¯ä»¥ä¸º `list` æˆ–è€… `map` è®¾ç½®é»˜è®¤å€¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå‡½æ•° `doStuff()`ï¼Œ å¹¶åˆ†åˆ«ä¸º `list` å’Œ `gifts` å‚æ•°æŒ‡å®šäº† é»˜è®¤å€¼ï¼š

```dart
void doStuff(
    {List<int> list = const [1, 2, 3],
    Map<String, String> gifts = const {
      'first': 'paper',
      'second': 'cotton',
      'third': 'leather'
    }}) {
  print('list:  $list');
  print('gifts: $gifts');
}

```

#### å…¥å£å‡½æ•°

æ¯ä¸ªåº”ç”¨éƒ½éœ€è¦æœ‰ä¸ªé¡¶çº§çš„ `main()` å…¥å£å‡½æ•°æ‰èƒ½æ‰§è¡Œã€‚ `main()` å‡½æ•°çš„è¿”å›å€¼ä¸º `void` å¹¶ä¸”æœ‰ä¸ªå¯é€‰çš„ `List<String>` å‚æ•°ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ª `web` åº”ç”¨çš„ `main()` å‡½æ•°ï¼š

```dart
void main() {
  querySelector("#sample_text_id")
    ..text = "Click me!"
    ..onClick.listen(reverseText);
}

```

**æ³¨æ„ï¼š** å‰é¢ä»£ç ä¸­çš„ `..` è¯­æ³•ä¸º **çº§è”è°ƒç”¨ï¼ˆcascadeï¼‰**ã€‚ ä½¿ç”¨çº§è”è°ƒç”¨è¯­æ³•ï¼Œ ä½ å¯ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ªæ“ä½œã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨çš„ `main()` å‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨äº†å‡½æ•°å‚æ•°ä½œä¸ºè¾“å…¥å‚æ•°ï¼š

```dart
// Run the app like this: dart args.dart 1 test
void main(List<String> arguments) {
  print(arguments);
  assert(arguments.length == 2);
  assert(int.parse(arguments[0]) == 1);
  assert(arguments[1] == 'test');
}

```

#### ä¸€ç­‰å‡½æ•°å¯¹è±¡

å¯ä»¥æŠŠå‡½æ•°å½“åšå‚æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼š

```dart
printElement(element) {
  print(element);
}

var list = [1, 2, 3];

// Pass printElement as a parameter.
list.forEach(printElement);

```

å‡½æ•°ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼š

```dart
var loudify = (msg) => '!!! ${msg.toUpperCase()} !!!';
assert(loudify('hello') == '!!! HELLO !!!');

```

ä¸Šé¢çš„å‡½æ•°ä¸ºä¸‹é¢å³å°†ä»‹ç»çš„åŒ¿åå‡½æ•°ã€‚

#### åŒ¿åå‡½æ•°

å¤§éƒ¨åˆ†å‡½æ•°éƒ½å¸¦æœ‰åå­—ï¼Œä¾‹å¦‚ `main()` æˆ–è€… `printElement()`ã€‚ ä½ æœ‰å¯ä»¥åˆ›å»ºæ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œç§°ä¹‹ä¸º **åŒ¿åå‡½æ•°**ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸º *lambda* æˆ–è€… *closure é—­åŒ…*ã€‚ ä½ å¯ä»¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œ ç„¶åä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚æ·»åŠ åˆ°é›†åˆæˆ–è€…ä»é›†åˆä¸­åˆ é™¤ã€‚

åŒ¿åå‡½æ•°å’Œå‘½åå‡½æ•°çœ‹èµ·æ¥æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨æ‹¬å·ä¹‹é—´å¯ä»¥å®šä¹‰ä¸€äº›å‚æ•°ï¼Œå‚æ•°ä½¿ç”¨é€—å·åˆ†å‰²ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯é€‰å‚æ•°ã€‚ åé¢å¤§æ‹¬å·ä¸­çš„ä»£ç ä¸ºå‡½æ•°ä½“ï¼š

```
([[Type] param1[, â€¦]]) {   codeBlock; }; 

```

ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªå‚æ•°ä¸º`i` ï¼ˆè¯¥å‚æ•°æ²¡æœ‰æŒ‡å®šç±»å‹ï¼‰çš„åŒ¿åå‡½æ•°ã€‚ `list` ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥ æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶æ¥è®¡ç®—äº†æ¯ä¸ªå…ƒç´ åœ¨ `list` ä¸­çš„ç´¢å¼•ä½ç½®ã€‚

```dart
var list = ['apples', 'oranges', 'grapes', 'bananas', 'plums'];
list.forEach((i) {
  print(list.indexOf(i).toString() + ': ' + i);
});

```

å¦‚æœå‡½æ•°åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨èƒ–ç®­å¤´è¯­æ³•ç¼©å†™ï¼š

```dart
list.forEach((i) => print(list.indexOf(i).toString() + ': ' + i));

```

#### é™æ€ä½œç”¨åŸŸ

Dart æ˜¯é™æ€ä½œç”¨åŸŸè¯­è¨€ï¼Œå˜é‡çš„ä½œç”¨åŸŸåœ¨å†™ä»£ç çš„æ—¶å€™å°±ç¡®å®šè¿‡äº†ã€‚ å¤§æ‹¬å·é‡Œé¢å®šä¹‰çš„å˜é‡å°±åªèƒ½åœ¨å¤§æ‹¬å·é‡Œé¢è®¿é—®ï¼Œå’Œ Java ä½œç”¨åŸŸç±»ä¼¼ã€‚

ä¸‹é¢æ˜¯ä½œç”¨åŸŸçš„ä¸€ä¸ªç¤ºä¾‹ï¼š

```dart
var topLevel = true;

main() {
  var insideMain = true;

  myFunction() {
    var insideFunction = true;

    nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}

```

æ³¨æ„ `nestedFunction()` å¯ä»¥è®¿é—®æ‰€æœ‰çš„å˜é‡ï¼Œ åŒ…å«é¡¶çº§å˜é‡ï¼Œä½†æ˜¯åœ¨`main()`å‡½æ•°ä¸­å°±ä¸èƒ½è®¿é—®`myFunction()`ä»¥åŠ`nestedFunction()`ä¸­çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ˜¯å‘ä¸‹å¯è§ã€å‘ä¸Šä¸å¯è§çš„ã€‚

#### è¯æ³•é—­åŒ…

ä¸€ä¸ª **é—­åŒ…** æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¸ç®¡è¯¥å¯¹è±¡åœ¨ä½•å¤„è¢«è°ƒç”¨ï¼Œ è¯¥å¯¹è±¡éƒ½å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚

å‡½æ•°å¯ä»¥å°é—­å®šä¹‰åˆ°å…¶ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ`makeAdder()` æ•è·åˆ°äº†å˜é‡ `addBy`ã€‚ ä¸ç®¡ä½ åœ¨é‚£é‡Œæ‰§è¡Œ `makeAdder()` æ‰€è¿”å›çš„å‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ `addBy` å‚æ•°ã€‚

```dart
/// Returns a function that adds [addBy] to the
/// function's argument.
Function makeAdder(num addBy) {
  return (num i) => addBy + i;
}

main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}

```

#### æµ‹è¯•å‡½æ•°æ˜¯å¦ç›¸ç­‰

ä¸‹é¢æ˜¯æµ‹è¯•é¡¶çº§å‡½æ•°ã€é™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•°ç›¸ç­‰çš„ç¤ºä¾‹ï¼š

```dart
foo() {}               // A top-level function

class A {
  static void bar() {} // A static method
  void baz() {}        // An instance method
}

main() {
  var x;

  // Comparing top-level functions.
  x = foo;
  assert(foo == x);

  // Comparing static methods.
  x = A.bar;
  assert(A.bar == x);

  // Comparing instance methods.
  var v = new A(); // Instance #1 of A
  var w = new A(); // Instance #2 of A
  var y = w;
  x = w.baz;

  // These closures refer to the same instance (#2),
  // so they're equal.
  assert(y.baz == x);

  // These closures refer to different instances,
  // so they're unequal.
  assert(v.baz != w.baz);
}

```

#### è¿”å›å€¼

æ‰€æœ‰çš„å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™é»˜è®¤æŠŠè¯­å¥ `return null;` ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªè¯­å¥æ‰§è¡Œã€‚

### æ“ä½œç¬¦

ä¸‹è¡¨æ˜¯ Dart ä¸­å®šä¹‰çš„æ“ä½œç¬¦ã€‚ å¾ˆå¤šæ“ä½œç¬¦éƒ½å¯ä»¥é‡è½½ï¼š

| æè¿°                     | æ“ä½œç¬¦                                                       |
| :----------------------- | :----------------------------------------------------------- |
| ä¸€å…ƒåç¼€                 | `expr++`    `expr--`    `()`    `[]`    `.`    `?.`          |
| ä¸€å…ƒå‰ç¼€                 | `-expr`    `!expr`    `~expr`    `++expr`    `--expr`        |
| ä¹˜é™¤ä½™                   | `*`    `/`    `%`  `~/`                                      |
| åŠ å‡                     | `+`    `-`                                                   |
| ç§»ä½                     | `<<`    `>>`                                                 |
| ä½è¿ç®—                   | `&` `^`   `|`                                                |
| relational and type test | `>=`    `>`    `<=`    `<`    `as`    `is`    `is!`          |
| equality                 | `==`    `!=`                                                 |
| logical AND              | `&&` `||`                                                    |
| if null                  | `??`                                                         |
| conditional              | `expr1 ? expr2 : expr3`                                      |
| cascade                  | `..`                                                         |
| assignment               | `=`    `*=`    `/=`    `~/=`    `%=`    `+=`    `-=`    `<<=`    `>>=`    `&=`    `^=`    `|=`    `??=` |

åœ¨ä½¿ç”¨æ“ä½œç¬¦çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºè¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ“ä½œç¬¦è¡¨è¾¾å¼ï¼š

```dart
a++
a + b
a = b
a == b
a ? b: c
a is T

```

åœ¨ä¸Šè¡¨ä¸­æ‰€åˆ—çš„æ“ä½œç¬¦éƒ½æ˜¯æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼æ¥åˆ—å‡ºçš„ï¼Œ ä¸Šé¢å’Œå·¦è¾¹çš„æ“ä½œç¬¦ä¼˜å…ˆçº§è¦é«˜äºä¸‹é¢å’Œå³è¾¹çš„ã€‚ ä¾‹å¦‚ `%` æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äº `==`ï¼Œè€Œ ç­‰å· é«˜äº `&&`ã€‚æ‰€ä»¥ä¸‹é¢çš„ä»£ç æ‰§è¡Œç»“æœæ˜¯ä¸€æ ·çš„ï¼š

```dart
// 1: Parens improve readability.
if ((n % i == 0) && (d % i == 0))

// 2: Harder to read, but equivalent.
if (n % i == 0 && d % i == 0)

```

**è­¦å‘Šï¼š** å¯¹äºæœ‰ä¸¤ä¸ªæ“ä½œæ•°çš„æ“ä½œç¬¦ï¼Œå·¦è¾¹çš„æ“ä½œæ•°å†³å®šäº†æ“ä½œç¬¦çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ª Vector å¯¹è±¡å’Œä¸€ä¸ª Point å¯¹è±¡ï¼Œ `aVector + aPoint` ä½¿ç”¨çš„ä¼šæ˜¯`Vector` å¯¹è±¡ä¸­å®šä¹‰çš„ + æ“ä½œç¬¦ã€‚

##### ç®—æœ¯æ“ä½œç¬¦

Dart æ”¯æŒå¸¸ç”¨çš„ç®—æœ¯æ“ä½œç¬¦ï¼Œå¦‚ä¸‹ï¼š

| æ“ä½œç¬¦    | è§£é‡Š                   |
| :-------- | :--------------------- |
| `+`       | åŠ å·                   |
| `â€“`       | å‡å·                   |
| `-*expr*` | è´Ÿå·                   |
| `*`       | ä¹˜å·                   |
| `/`       | é™¤å·                   |
| `~/`      | é™¤å·ï¼Œä½†æ˜¯è¿”å›å€¼ä¸ºæ•´æ•° |
| `%`       | å–æ¨¡                   |

ç¤ºä¾‹ï¼š

```dart
assert(2 + 3 == 5);
assert(2 - 3 == -1);
assert(2 * 3 == 6);
assert(5 / 2 == 2.5);   // Result is a double
assert(5 ~/ 2 == 2);    // Result is an integer
assert(5 % 2 == 1);     // Remainder

print('5/2 = ${5~/2} r ${5%2}'); // 5/2 = 2 r 1

```

Dart è¿˜æ”¯æŒé€’å¢ã€é€’å‡å‰ç¼€ å’Œåç¼€æ“ä½œï¼š

| æ“ä½œç¬¦  | è§£é‡Š                                                         |
| :------ | :----------------------------------------------------------- |
| `++var` | `var = var + 1` (è¡¨è¾¾å¼çš„å€¼æ˜¯ `var + 1`ï¼Œå› ä¸ºå…ˆè¿›è¡Œ`+1`æ“ä½œï¼Œå†æ‰§è¡Œè¡¨è¾¾å¼) |
| `var++` | `var = var + 1` (è¡¨è¾¾å¼çš„å€¼æ˜¯ `var`ï¼Œå› ä¸ºå…ˆæ‰§è¡Œè¡¨è¾¾å¼ï¼Œå†è¿›è¡Œ`+1`æ“ä½œ) |
| `--var` | `var = var â€“ 1` (è¡¨è¾¾å¼çš„å€¼æ˜¯ `var â€“ 1`ï¼Œå› ä¸ºå…ˆè¿›è¡Œ`-1`æ“ä½œï¼Œå†æ‰§è¡Œè¡¨è¾¾å¼) |
| `var--` | `var = var â€“ 1` (è¡¨è¾¾å¼çš„å€¼æ˜¯ `var`ï¼Œå› ä¸ºå…ˆæ‰§è¡Œè¡¨è¾¾å¼ï¼Œå†è¿›è¡Œ`+1`æ“ä½œ) |

ç¤ºä¾‹ï¼š

```dart
var a, b;

a = 0;
b = ++a;        // Increment a before b gets its value.
assert(a == b); // 1 == 1

a = 0;
b = a++;        // Increment a AFTER b gets its value.
assert(a != b); // 1 != 0

a = 0;
b = --a;        // Decrement a before b gets its value.
assert(a == b); // -1 == -1

a = 0;
b = a--;        // Decrement a AFTER b gets its value.
assert(a != b); // -1 != 0

```

##### ç›¸ç­‰ç›¸å…³çš„æ“ä½œç¬¦

ä¸‹è¡¨æ˜¯å’Œç›¸ç­‰æ“ä½œç›¸å…³çš„æ“ä½œç¬¦ã€‚

| æ“ä½œç¬¦ | è§£é‡Š     |
| :----- | :------- |
| `==`   | ç›¸ç­‰     |
| `!=`   | ä¸ç­‰     |
| `>`    | å¤§äº     |
| `<`    | å°äº     |
| `>=`   | å¤§äºç­‰äº |
| `<=`   | å°äºç­‰äº |

è¦æµ‹è¯•ä¸¤ä¸ªå¯¹è±¡ä»£è¡¨çš„æ˜¯å¦ä¸ºåŒæ ·çš„å†…å®¹ï¼Œä½¿ç”¨ `==` æ“ä½œç¬¦ã€‚å¦‚æœä½ éœ€è¦çŸ¥é“ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåº”è¯¥ä½¿ç”¨`identical()`æ–¹æ³•ã€‚

 ä¸‹é¢æ˜¯ `==` æ“ä½œç¬¦å·¥ä½œåŸç†è§£é‡Šï¼š

1. å¦‚æœ *x* æˆ–è€… *y* æ˜¯ nullï¼šå¦‚æœä¸¤ä¸ªéƒ½æ˜¯ null åˆ™è¿”å› trueï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ˜¯ null è¿”å› falseã€‚
2. å¦‚æœxå’Œyéƒ½ä¸æ˜¯nullï¼šè¿”å› `x.==(y)`è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼ˆåƒ `==` è¿™ç§æ“ä½œç¬¦æ˜¯å®šä¹‰åœ¨å·¦è¾¹å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚ ä½ ç”šè‡³è¿˜å¯ä»¥é‡å†™è¿™äº›æ“ä½œç¬¦å¯¹åº”çš„æ–¹æ³•ã€‚ï¼Œåœ¨åé¢çš„ç« èŠ‚å°†ä¼šå…·ä½“ä»‹ç»ã€‚ï¼‰

ä¸‹é¢æ˜¯ç›¸ç­‰å…³ç³»æ“ä½œç¬¦çš„ ä½¿ç”¨ç¤ºä¾‹ï¼š

```dart
assert(2 == 2);
assert(2 != 3);
assert(3 > 2);
assert(2 < 3);
assert(3 >= 3);
assert(2 <= 3);
```

##### ç±»å‹åˆ¤å®šæ“ä½œç¬¦

`as`ã€ `is`ã€ å’Œ `is!` æ“ä½œç¬¦æ˜¯åœ¨è¿è¡Œæ—¶åˆ¤å®šå¯¹è±¡ç±»å‹çš„æ“ä½œç¬¦ï¼š

| æ“ä½œç¬¦ | è§£é‡Š                             |
| :----- | :------------------------------- |
| `as`   | ç±»å‹è½¬æ¢                         |
| `is`   | å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šçš„ç±»å‹è¿”å› `True`  |
| `is!`  | å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šçš„ç±»å‹è¿”å› `False` |

åªæœ‰å½“ `obj` å®ç°äº† `T` çš„æ¥å£ï¼Œ `obj is T` æ‰æ˜¯ `true`ã€‚ä¾‹å¦‚ `obj is Object` æ€»æ˜¯ `true`ã€‚

ä½¿ç”¨ `as` æ“ä½œç¬¦æŠŠå¯¹è±¡è½¬æ¢ä¸ºç‰¹å®šçš„ç±»å‹ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“åšç”¨ `is` åˆ¤å®šç±»å‹ç„¶åè°ƒç”¨æ‰€åˆ¤å®šå¯¹è±¡çš„å‡½æ•°çš„ç¼©å†™å½¢å¼ã€‚ä¾‹å¦‚ä¸‹é¢çš„ ç¤ºä¾‹ï¼š

```dart
if (emp is Person) { // Type check
  emp.firstName = 'Bob';
}
```

ä½¿ç”¨ `as` æ“ä½œç¬¦å¯ä»¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ï¼š

```dart
(emp as Person).firstName = 'Bob';
```

**æ³¨æ„ï¼š** ä¸Šé¢è¿™ä¸¤ä¸ªä»£ç æ•ˆæœæ˜¯æœ‰åŒºåˆ«çš„ã€‚å¦‚æœ `emp` æ˜¯ null æˆ–è€…ä¸æ˜¯ Person ç±»å‹ï¼Œ åˆ™ç¬¬ä¸€ä¸ªç¤ºä¾‹ä½¿ç”¨ `is` åˆ™ä¸ä¼šæ‰§è¡Œæ¡ä»¶é‡Œé¢çš„ä»£ç ï¼Œè€Œç¬¬äºŒä¸ªæƒ…å†µä½¿ç”¨ `as` åˆ™ä¼š**æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸**ã€‚

##### èµ‹å€¼æ“ä½œç¬¦

ä½¿ç”¨ `=` æ“ä½œç¬¦æ¥èµ‹å€¼ï¼Œç”¨ `??=` æ“ä½œç¬¦ç”¨æ¥æŒ‡å®šå€¼ä¸º null çš„å˜é‡çš„å€¼ã€‚

```dart
a = value;   // ç»™ a å˜é‡èµ‹å€¼
b ??= value; // å¦‚æœ b æ˜¯ nullï¼Œåˆ™å°†valueèµ‹å€¼ç»™ bï¼›
             // å¦‚æœä¸æ˜¯ nullï¼Œåˆ™ b çš„å€¼ä¿æŒä¸å˜
```

è¿˜æœ‰å¤åˆèµ‹å€¼æ“ä½œç¬¦ `+=` ç­‰å¯ä»¥ èµ‹å€¼ï¼š

| `=`  | `-=` | `/=`  | `%=`  | `>>=` | `^=` |
| ---- | ---- | ----- | ----- | ----- | ---- |
| `+=` | `*=` | `~/=` | `<<=` | `&=`  | `|=` |

ä¸‹é¢æ˜¯å¤åˆèµ‹å€¼æ“ä½œç¬¦å·¥ä½œåŸç†è§£é‡Šï¼š

|                     | å¤åˆèµ‹å€¼æ“ä½œç¬¦ | å¯¹åº”çš„å®Œæ•´è¡¨è¾¾å¼ |
| :------------------ | :------------- | :--------------- |
| **å¯¹äº æ“ä½œç¬¦ op:** | `a op = b`     | `a = a op b`     |
| **ç¤ºä¾‹:**           | `a += b`       | `a = a + b`      |

æ¯”å¦‚ï¼š

```dart
var a = 2;           // Assign using =
a *= 3;              // Assign and multiply: a = a * 3
assert(a == 6);
```

##### é€»è¾‘æ“ä½œç¬¦

å¯ä»¥ä½¿ç”¨é€»è¾‘æ“ä½œç¬¦æ¥æ“ä½œå¸ƒå°”å€¼ï¼š

| æ“ä½œç¬¦  | è§£é‡Š                                                         |
| :------ | :----------------------------------------------------------- |
| `!expr` | å¯¹è¡¨è¾¾å¼ç»“æœå–åï¼ˆ`true` å˜ä¸º `false` ï¼Œ`false` å˜ä¸º `true`ï¼‰ |
| `||`    | é€»è¾‘æˆ–                                                       |
| `&&`    | é€»è¾‘ä¸                                                       |

ä¸‹é¢æ˜¯ä½¿ç”¨ç¤ºä¾‹ï¼š

```dart
if (!done && (col == 0 || col == 3)) {
  // ...Do something...
}

```

##### ä½å’Œç§»ä½æ“ä½œç¬¦

åœ¨ Dart ä¸­å¯ä»¥å•ç‹¬æ“ä½œæ•°å­—çš„æŸä¸€ä½ï¼Œ ä¸‹é¢æ“ä½œç¬¦åŒæ ·åº”ç”¨äºæ•´æ•°ï¼š

| æ“ä½œç¬¦  | è§£é‡Š        |
| :------ | :---------- |
| `&`     | ä¸          |
| `|`     | æˆ–          |
| `^`     | å¼‚æˆ–        |
| `~expr` | æŒ‰ä½å–å    |
| `<<`    | Shift left  |
| `>>`    | Shift right |

ä½¿ç”¨ä½äºå’Œç§»ä½æ“ä½œç¬¦çš„ç¤ºä¾‹ï¼š

```dart
final value = 0x22;
final bitmask = 0x0f;

assert((value & bitmask)  == 0x02);  // AND
assert((value & ~bitmask) == 0x20);  // AND NOT
assert((value | bitmask)  == 0x2f);  // OR
assert((value ^ bitmask)  == 0x2d);  // XOR
assert((value << 4)       == 0x220); // Shift left
assert((value >> 4)       == 0x02);  // Shift right
```

##### æ¡ä»¶è¡¨è¾¾å¼

Dart æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦å¯ä»¥ç”¨æ¥æ›¿ä»£ `if-else`è¯­å¥ï¼š

- `condition ? expr1 : expr2`

  å¦‚æœ *condition* æ˜¯ trueï¼Œæ‰§è¡Œ *expr1* (å¹¶è¿”å›æ‰§è¡Œçš„ç»“æœ)ï¼Œ å¦åˆ™æ‰§è¡Œ *expr2* å¹¶è¿”å›å…¶ç»“æœã€‚

- `expr1?? expr2`

  å¦‚æœ *expr1* ä¸ä¸ºnullï¼Œè¿”å›å…¶å€¼ï¼Œ å¦åˆ™æ‰§è¡Œ *expr2* å¹¶è¿”å›å…¶ç»“æœã€‚

å¦‚æœä½ éœ€è¦åŸºäºå¸ƒå°”è¡¨è¾¾å¼çš„å€¼æ¥èµ‹å€¼ï¼Œ è€ƒè™‘ä½¿ç”¨ `?:`ã€‚

```dart
var finalStatus = m.isFinal ? 'final' : 'not final';
```

å¦‚æœå¸ƒå°”è¡¨è¾¾å¼æ˜¯æµ‹è¯•å€¼æ˜¯å¦ä¸º nullï¼Œ è€ƒè™‘ä½¿ç”¨ `??`ã€‚

```dart
String toString() => msg ?? super.toString();
```

ä¸‹é¢æ˜¯ä¸€æ ·æ•ˆæœçš„å®ç°ï¼Œ ä½†æ˜¯ä»£ç ä¸æ˜¯é‚£ä¹ˆç®€æ´ï¼š

```dart
// Slightly longer version uses ?: operator.
String toString() => msg == null ? super.toString() : msg;

// Very long version uses if-else statement.
String toString() {
  if (msg == null) {
    return super.toString();
  } else {
    return msg;
  }
}
```

##### çº§è”æ“ä½œç¬¦

çº§è”æ“ä½œç¬¦ (`..`) å¯ä»¥åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè¿ç»­è°ƒç”¨å¤šä¸ªå‡½æ•°ä»¥åŠè®¿é—®æˆå‘˜å˜é‡ã€‚ ä½¿ç”¨çº§è”æ“ä½œç¬¦å¯ä»¥é¿å…åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œ å¹¶ä¸”å†™å‡ºæ¥çš„ä»£ç çœ‹èµ·æ¥æ›´åŠ æµç•…ï¼š

ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```dart
querySelector('#button') // Get an object.
  ..text = 'Confirm'   // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) => window.alert('Confirmed!'));

```

ç¬¬ä¸€ä¸ªæ–¹æ³• `querySelector()` è¿”å›äº†ä¸€ä¸ª `selector` å¯¹è±¡ã€‚ åé¢çš„çº§è”æ“ä½œç¬¦éƒ½æ˜¯è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æˆå‘˜ï¼Œ å¹¶å¿½ç•¥æ¯ä¸ªæ“ä½œæ‰€è¿”å›çš„å€¼ã€‚

ä¸Šé¢çš„ä»£ç å’Œä¸‹é¢çš„ä»£ç åŠŸèƒ½ä¸€æ ·ï¼š

```dart
var button = querySelector('#button');
button.text = 'Confirm';
button.classes.add('important');
button.onClick.listen((e) => window.alert('Confirmed!'));

```

çº§è”è°ƒç”¨ä¹Ÿå¯ä»¥åµŒå¥—ï¼š

```dart
final addressBook = (new AddressBookBuilder()
      ..name = 'jenny'
      ..email = 'jenny@example.com'
      ..phone = (new PhoneNumberBuilder()
            ..number = '415-555-0100'
            ..label = 'home')
          .build())
    .build();

```

åœ¨æ–¹æ³•ä¸Šä½¿ç”¨çº§è”æ“ä½œç¬¦éœ€è¦éå¸¸å°å¿ƒï¼Œ ä¾‹å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯ä¸åˆæ³•çš„ï¼š

```dart
// Does not work
var sb = new StringBuffer();
sb.write('foo')..write('bar');

```

`sb.write()` å‡½æ•°è¿”å›ä¸€ä¸ª `void`ï¼Œ æ— æ³•åœ¨ `void` ä¸Šä½¿ç”¨çº§è”æ“ä½œç¬¦ã€‚

**æ³¨æ„ï¼š** ä¸¥æ ¼æ¥è¯´ï¼Œ ä¸¤ä¸ªç‚¹çš„çº§è”è¯­æ³•ä¸æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œ åªæ˜¯ä¸€ä¸ª Dart ç‰¹æ®Šè¯­æ³•ã€‚

##### å…¶ä»–æ“ä½œç¬¦

ä¸‹é¢æ˜¯å…¶ä»–æ“ä½œç¬¦ï¼š

| Operator | Name          | Meaning                                                      |
| :------- | :------------ | :----------------------------------------------------------- |
| `()`     | ä½¿ç”¨æ–¹æ³•      | ä»£è¡¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•                                             |
| `[]`     | è®¿é—® `List`   | è®¿é—® `list` ä¸­ç‰¹å®šä½ç½®çš„å…ƒç´                                  |
| `.`      | è®¿é—® `Member` | è®¿é—®å…ƒç´ ï¼Œä¾‹å¦‚ `foo.bar` ä»£è¡¨è®¿é—® `foo` çš„ `bar` æˆå‘˜        |
| `?.`     | æ¡ä»¶æˆå‘˜è®¿é—®  | å’Œ `.` ç±»ä¼¼ï¼Œä½†æ˜¯å·¦è¾¹çš„æ“ä½œå¯¹è±¡ä¸èƒ½ä¸º `null`ï¼Œä¾‹å¦‚ `foo?.bar` å¦‚æœ `foo` ä¸º `null` åˆ™è¿”å› `null`ï¼Œå¦åˆ™è¿”å› `bar` æˆå‘˜ |

å…³äº `.`ã€ `?.`ã€å’Œ `..` çš„è¯¦æƒ…ï¼Œè¯·å‚è€ƒ [Classes](http://dart.goodev.org/guides/language/language-tour#classes)ã€‚

### æµç¨‹æ§åˆ¶è¯­å¥

å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥æ§åˆ¶ Dart ä»£ç çš„æµç¨‹ï¼š

- `if` ä»¥åŠ `else`
- `for` å¾ªç¯
- `while`ä»¥åŠ `do`-`while` å¾ªç¯
- `break` å’Œ `continue`
- `switch` å’Œ `case`
- `assert`

##### Ifå’Œelse

Dart æ”¯æŒ `if` è¯­å¥ä»¥åŠå¯é€‰çš„ `else`ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š

```dart
if (isRaining()) {
  you.bringRainCoat();
} else if (isSnowing()) {
  you.wearJacket();
} else {
  car.putTopDown();
}
```

##### Forå¾ªç¯

å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ `for` å¾ªç¯ï¼š

```dart
var message = new StringBuffer("Dart is fun");
for (var i = 0; i < 5; i++) {
  message.write('!');
}
```

Dart `for` å¾ªç¯ä¸­çš„é—­åŒ…ä¼šæ•è·å¾ªç¯çš„ `index` ç´¢å¼•å€¼ï¼Œä¾‹å¦‚ï¼š

```dart
var callbacks = [];
for (var i = 0; i < 2; i++) {
  callbacks.add(() => print(i));
}
callbacks.forEach((c) => c());

```

è¾“å‡ºçš„ç»“æœä¸ºæ‰€æœŸæœ›çš„ `0` å’Œ `1`ã€‚

å¦‚æœè¦éå†çš„å¯¹è±¡å®ç°äº† `Iterable` æ¥å£ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `forEach()`æ–¹æ³•ã€‚å¦‚æœæ²¡å¿…è¦ä½¿ç”¨å½“å‰éå†çš„ç´¢å¼•ï¼Œåˆ™ä½¿ç”¨ `forEach()` æ–¹æ³•æ˜¯ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼š

```dart
candidates.forEach((candidate) => candidate.interview());

```

`List` å’Œ `Set` ç­‰å®ç°äº† `Iterable` æ¥å£ï¼Œå¦å¤–å®ç°äº†`Iterable`çš„ç±»è¿˜æ”¯æŒ `for-in` å½¢å¼çš„éå†ï¼š

```dart
var collection = [0, 1, 2];
for (var x in collection) {
  print(x);
}

```

##### While ä»¥åŠ do-while

`while` å¾ªç¯åœ¨æ‰§è¡Œå¾ªç¯ä¹‹å‰å…ˆåˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼š

```dart
while (!isDone()) {
  doSomething();
}

```

è€Œ `do`-`while` å¾ªç¯æ˜¯å…ˆæ‰§è¡Œå¾ªç¯ä»£ç å†åˆ¤æ–­æ¡ä»¶ï¼š

```dart
do {
  printLine();
} while (!atEndOfPage());

```

##### Break å’Œ continue

ä½¿ç”¨ `break` æ¥ç»ˆæ­¢å¾ªç¯ï¼š

```dart
while (true) {
  if (shutDownRequested()) break;
  processIncomingRequests();
}

```

ä½¿ç”¨ `continue` æ¥å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯ï¼š

```dart
for (int i = 0; i < candidates.length; i++) {
  var candidate = candidates[i];
  if (candidate.yearsExperience < 5) {
    continue;
  }
  candidate.interview();
}

```

ä¸Šé¢çš„ä»£ç åœ¨å®ç° `Iterable` æ¥å£çš„å¯¹è±¡ä¸Šå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å†™æ³•ï¼š

```dart
candidates.where((c) => c.yearsExperience >= 5)
          .forEach((c) => c.interview());

```

##### Switch å’Œ case

Dart ä¸­çš„ Switch è¯­å¥ä½¿ç”¨ `==` æ¯”è¾ƒ integerã€stringã€æˆ–è€…ç¼–è¯‘æ—¶å¸¸é‡ã€‚ æ¯”è¾ƒçš„å¯¹è±¡å¿…é¡»éƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å®ä¾‹ï¼ˆä¹Ÿä¸èƒ½æ˜¯å…¶å­ç±»ï¼‰ï¼Œè€Œä¸”å¯¹åº”ç±»å¿…é¡»æ²¡æœ‰é‡å†™ `==` æ“ä½œç¬¦ã€‚

æ¯ä¸ªéç©ºçš„ `case` è¯­å¥éƒ½å¿…é¡»æœ‰ä¸€ä¸ª `break` è¯­å¥ã€‚ å¦å¤–è¿˜å¯ä»¥é€šè¿‡ `continue`ã€ `throw` æˆ–è€… `return` æ¥ç»“æŸéç©º `case` è¯­å¥ã€‚

å½“æ²¡æœ‰ `case` è¯­å¥åŒ¹é…çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ `default` è¯­å¥æ¥åŒ¹é…è¿™ç§é»˜è®¤æƒ…å†µã€‚

```dart
var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'PENDING':
    executePending();
    break;
  case 'APPROVED':
    executeApproved();
    break;
  case 'DENIED':
    executeDenied();
    break;
  case 'OPEN':
    executeOpen();
    break;
  default:
    executeUnknown();
}
```

ä¸‹é¢çš„ç¤ºä¾‹ä»£ç åœ¨ `case` ä¸­çœç•¥äº† `break` è¯­å¥ï¼Œ ç¼–è¯‘çš„æ—¶å€™å°†ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ï¼š

```dart
var command = 'OPEN';
switch (command) {
  case 'OPEN':
    executeOpen();
    // ERROR: Missing break causes an exception!!

  case 'CLOSED':
    executeClosed();
    break;
}
```

ä½†æ˜¯ï¼Œåœ¨ Dart ä¸­çš„ç©º `case` è¯­å¥ä¸­å¯ä»¥ä¸è¦ `break` è¯­å¥ï¼š

```dart
var command = 'CLOSED';
switch (command) {
  case 'CLOSED': // Empty case falls through.
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}
```

å¦‚æœä½ éœ€è¦å®ç°è¿™ç§ç»§ç»­åˆ°ä¸‹ä¸€ä¸ª `case` è¯­å¥ä¸­ç»§ç»­æ‰§è¡Œï¼Œåˆ™å¯ä»¥ ä½¿ç”¨ `continue` è¯­å¥è·³è½¬åˆ°å¯¹åº”çš„æ ‡ç­¾ï¼ˆ`label`ï¼‰å¤„ç»§ç»­æ‰§è¡Œï¼š

```dart
var command = 'CLOSED';
switch (command) {
  case 'CLOSED':
    executeClosed();
    continue nowClosed;
    // Continues executing at the nowClosed label.

nowClosed:
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}

```

æ¯ä¸ª `case` è¯­å¥éƒ½å¯ä»¥æœ‰å±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡åªæœ‰åœ¨è¿™ä¸ªè¯­å¥å†…å¯è§ã€‚

##### Assertï¼ˆæ–­è¨€ï¼‰

å¦‚æœæ¡ä»¶è¡¨è¾¾å¼ç»“æœä¸æ»¡è¶³éœ€è¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `assert` è¯­å¥æ¥æ‰“æ–­ä»£ç çš„æ‰§è¡Œã€‚ ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨æ–­è¨€ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ä»£ç ï¼š

```dart
// Make sure the variable has a non-null value.
assert(text != null);

// Make sure the value is less than 100.
assert(number < 100);

// Make sure this is an https URL.
assert(urlString.startsWith('https'));

```

**æ³¨æ„ï¼š** æ–­è¨€åªåœ¨**æ£€æŸ¥æ¨¡å¼**ä¸‹è¿è¡Œæœ‰æ•ˆï¼Œå¦‚æœåœ¨ç”Ÿäº§æ¨¡å¼è¿è¡Œï¼Œåˆ™æ–­è¨€ä¸ä¼šæ‰§è¡Œã€‚

`assert` æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸ºä»»ä½•è¿”å›å¸ƒå°”å€¼çš„è¡¨è¾¾å¼æˆ–è€…æ–¹æ³•ã€‚ å¦‚æœè¿”å›çš„å€¼ä¸º trueï¼Œ æ–­è¨€æ‰§è¡Œé€šè¿‡ï¼Œæ‰§è¡Œç»“æŸã€‚ å¦‚æœè¿”å›å€¼ä¸º `false`ï¼Œ æ–­è¨€æ‰§è¡Œå¤±è´¥ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª`AssertionError`å¼‚å¸¸ ã€‚

### å¼‚å¸¸ï¼ˆExceptionsï¼‰

ä»£ç ä¸­å¯ä»¥å‡ºç°å¼‚å¸¸å’Œæ•è·å¼‚å¸¸ã€‚å¼‚å¸¸è¡¨ç¤ºä¸€äº›æœªçŸ¥çš„é”™è¯¯æƒ…å†µã€‚å¦‚æœæ²¡æœ‰å¯¹å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œ åˆ™å¼‚å¸¸ä¼šè¢«æŠ›å‡ºï¼Œå¯¼è‡´æŠ›å‡ºå¼‚å¸¸çš„ä»£ç ä¼šç»ˆæ­¢æ‰§è¡Œã€‚

å’Œ Java ä¸åŒçš„æ˜¯ï¼Œæ‰€æœ‰çš„ Dart å¼‚å¸¸æ˜¯éæ£€æŸ¥å¼‚å¸¸ã€‚ æ–¹æ³•ä¸ä¸€å®šå£°æ˜äº†ä»–ä»¬æ‰€æŠ›å‡ºçš„å¼‚å¸¸ï¼Œ å¹¶ä¸”ä¸è¦æ±‚ä½ æ•è·ä»»ä½•å¼‚å¸¸ã€‚

Dart æä¾›äº† `Exception` å’Œ `Error` ç±»å‹ï¼Œ ä»¥åŠä¸€äº›å­ç±»å‹ã€‚ä½ è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»å‹ã€‚ä½†æ˜¯ï¼Œ Dart ä»£ç å¯ä»¥æŠ›å‡ºä»»ä½•é `null` å¯¹è±¡ä½œä¸ºä¸ºå¼‚å¸¸ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ç°äº† `Exception` æˆ–è€… `Error` çš„å¯¹è±¡ã€‚

#### Throw

ä¸‹é¢æ˜¯æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸çš„ç¤ºä¾‹ï¼š

```dart
throw new FormatException('Expected at least 1 section');

```

è¿˜å¯ä»¥æŠ›å‡ºä»»æ„çš„å¯¹è±¡ï¼š

```dart
throw 'Out of llamas!';

```

ç”±äºæŠ›å‡ºå¼‚å¸¸æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ => è¯­å¥ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–èƒ½ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚

```dart
distanceTo(Point other) =>
    throw new UnimplementedError();

```

#### Catch

æ•è·å¼‚å¸¸å¯ä»¥é¿å…å¼‚å¸¸ç»§ç»­ä¼ é€’ï¼ˆä½ åœ¨`catch`è¯­å¥ä¸­åˆé‡æ–°æŠ›å‡ºå¼‚å¸¸é™¤å¤–ï¼‰ã€‚ æ•è·å¼‚å¸¸ç»™ä½ ä¸€ä¸ªå¤„ç†è¯¥å¼‚å¸¸çš„æœºä¼šï¼š

```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  buyMoreLlamas();
}

```

å¯¹äºå¯ä»¥æŠ›å‡ºå¤šç§ç±»å‹å¼‚å¸¸çš„ä»£ç ï¼Œä½ å¯ä»¥æŒ‡å®šå¤šä¸ªæ•è·è¯­å¥ã€‚æ¯ä¸ªè¯­å¥åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼‚å¸¸ç±»å‹ï¼Œ å¦‚æœæ•è·è¯­å¥æ²¡æœ‰æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œåˆ™è¯¥è¯­å¥å¯ä»¥æ•è·ä»»ä½•å¼‚å¸¸ç±»å‹ï¼š

```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print('Unknown exception: $e');
} catch (e) {
  // No specified type, handles all
  print('Something really unknown: $e');
}

```

å¦‚ä¹‹å‰ä»£ç æ‰€ç¤ºï¼Œä½ å¯ä»¥ä½¿ç”¨`on` æˆ–è€… `catch` æ¥å£°æ˜æ•è·è¯­å¥ï¼Œä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨ã€‚ä½¿ç”¨ `on` æ¥æŒ‡å®šå¼‚å¸¸ç±»å‹ï¼Œä½¿ç”¨ `catch` æ¥ æ•è·å¼‚å¸¸å¯¹è±¡ã€‚

å‡½æ•° `catch()` å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œ ç¬¬äºŒä¸ªä¸ºå †æ ˆä¿¡æ¯ (ä¸€ä¸ª `StackTrace` å¯¹è±¡)ã€‚

```dart
  ...
} on Exception catch (e) {
  print('Exception details:\n $e');
} catch (e, s) {
  print('Exception details:\n $e');
  print('Stack trace:\n $s');
}
```

ä½¿ç”¨ `rethrow` å…³é”®å­—å¯ä»¥ æŠŠæ•è·çš„å¼‚å¸¸ç»™ é‡æ–°æŠ›å‡ºã€‚

```dart
final foo = '';

void misbehave() {
  try {
    foo = "You can't change a final variable's value.";
  } catch (e) {
    print('misbehave() partially handled ${e.runtimeType}.');
    rethrow; // Allow callers to see the exception.
  }
}

void main() {
  try {
    misbehave();
  } catch (e) {
    print('main() finished handling ${e.runtimeType}.');
  }
}
```

#### Finally

è¦ç¡®ä¿æŸäº›ä»£ç æ‰§è¡Œï¼Œä¸ç®¡æœ‰æ²¡æœ‰å‡ºç°å¼‚å¸¸éƒ½éœ€è¦æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ ä¸€ä¸ª `finally` è¯­å¥æ¥å®ç°ã€‚å¦‚æœæ²¡æœ‰ `catch` è¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œ åˆ™åœ¨æ‰§è¡Œå®Œ `finally` è¯­å¥åï¼Œ å¼‚å¸¸è¢«æŠ›å‡ºäº†ï¼š

```dart
try {
  breedMoreLlamas();
} finally {
  // Always clean up, even if an exception is thrown.
  cleanLlamaStalls();
}
```

å®šä¹‰çš„ `finally` è¯­å¥åœ¨ä»»ä½•åŒ¹é…çš„ `catch` è¯­å¥ä¹‹åæ‰§è¡Œï¼š

```dart
try {
  breedMoreLlamas();
} catch(e) {
  print('Error: $e');  // Handle the exception first.
} finally {
  cleanLlamaStalls();  // Then clean up.
}
```